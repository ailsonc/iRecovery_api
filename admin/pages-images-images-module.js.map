{"version":3,"sources":["webpack:///./src/app/pages/images/image-form/image-form.component.html","webpack:///./src/app/pages/images/image-form/image-form.component.scss","webpack:///./src/app/pages/images/image-form/image-form.component.ts","webpack:///./src/app/pages/images/image-list/image-list.component.html","webpack:///./src/app/pages/images/image-list/image-list.component.scss","webpack:///./src/app/pages/images/image-list/image-list.component.ts","webpack:///./src/app/pages/images/images-routing.module.ts","webpack:///./src/app/pages/images/images.module.ts","webpack:///./src/app/pages/images/models/image.model.ts","webpack:///./src/app/pages/images/service/image.service.ts"],"names":[],"mappings":"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","file":"pages-images-images-module.js","sourcesContent":["module.exports = \"<app-bread-crumb [itens]=\\\"[{text:'Imagens', link:'/images'}, {text:pageTitle} ]\\\"></app-bread-crumb>\\r\\n\\r\\n<app-page-header [page-title]=\\\"pageTitle\\\" button-link=\\\"/images\\\" button-class=\\\"btn-light\\\" button-text=\\\"<< Voltar\\\"></app-page-header>\\r\\n\\r\\n<form [formGroup]=\\\"resourceForm\\\" (submit)=\\\"submitForm()\\\">\\r\\n  <div class=\\\"card\\\">\\r\\n    <div class=\\\"card-header\\\">\\r\\n      Informações sobre a Imagem\\r\\n    </div>\\r\\n    <div class=\\\"card-body\\\">\\r\\n      <div class=\\\"form-row\\\">\\r\\n        <!-- name -->\\r\\n        <div class=\\\"form-group col-md-6\\\">\\r\\n          <label for=\\\"name\\\">Nome</label>\\r\\n          <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"name\\\" formControlName=\\\"name\\\">\\r\\n          <app-form-field-error [form-control]=\\\"resourceForm.get('name')\\\"></app-form-field-error>\\r\\n        </div>\\r\\n        <!-- file -->\\r\\n        <div class=\\\"form-group col-md-6\\\">\\r\\n          <label for=\\\"profile\\\">ISO</label>\\r\\n          <input type=\\\"file\\\" class=\\\"form-control-file\\\" id=\\\"profile\\\" (change)=\\\"onSelectedFile($event.target.files)\\\">\\r\\n          <app-form-field-error [form-control]=\\\"resourceForm.get('profile')\\\"></app-form-field-error>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"form-row\\\">\\r\\n        <!-- description -->\\r\\n        <div class=\\\"form-group col-md-7\\\">\\r\\n          <label for=\\\"description\\\">Descrição</label>\\r\\n          <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"description\\\" formControlName=\\\"description\\\">\\r\\n        </div>\\r\\n        <!-- systemId -->\\r\\n        <div class=\\\"form-group col-md-4\\\">\\r\\n          <label for=\\\"idsystem\\\">Sistema Operacional</label>\\r\\n          <select name=\\\"idsystem\\\" id=\\\"idsystem\\\" class=\\\"form-control\\\" formControlName=\\\"idsystem\\\">\\r\\n            <option *ngFor=\\\"let system of systems\\\" [value]=\\\"system.id\\\">{{system.name}}</option>\\r\\n          </select>\\r\\n          <app-form-field-error [form-control]=\\\"resourceForm.get('idsystem')\\\"></app-form-field-error>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!--progress-->\\r\\n      <div *ngIf=\\\"fileUpload.status!=='progress'\\\">\\r\\n        <div class=\\\"progress\\\" style=\\\"height: 20px;margin-bottom:20px;\\\">\\r\\n          <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" [style.width.%]=\\\"fileUpload.message\\\" aria-valuenow=\\\"25\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">{{fileUpload.message}}%</div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!--message-->\\r\\n      <app-file-upload-error-message [file-upload]=\\\"fileUpload\\\"></app-file-upload-error-message>\\r\\n    </div>\\r\\n  </div>\\r\\n  <app-server-error-messages [server-error-messages]=\\\"serverErrorMessages\\\"></app-server-error-messages>\\r\\n  <button [disabled]=\\\"submittingForm || resourceForm.invalid\\\" type=\\\"submit\\\" class=\\\"btn btn-primary btn-lg float-right mt-3\\\">Salvar</button>\\r\\n</form>\\r\\n\\r\\n<pre>{{resourceForm.value | json }}</pre>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ltYWdlcy9pbWFnZS1mb3JtL2ltYWdlLWZvcm0uY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Injector } from '@angular/core';\r\nimport { Validators } from '@angular/forms';\r\nimport { BaseResourceFormComponent } from '../../../shared/components/base-resource-form/base-resource-form.component';\r\nimport { Image } from '../models/image.model';\r\nimport { ImageService } from '../service/image.service';\r\nimport { System } from '../../systems/models/system.model';\r\nimport { SystemService } from '../../systems/service/system.service';\r\n\r\n@Component({\r\n  selector: 'app-image-form',\r\n  templateUrl: './image-form.component.html',\r\n  styleUrls: ['./image-form.component.scss']\r\n})\r\nexport class ImageFormComponent extends BaseResourceFormComponent<Image> implements OnInit {\r\n  systems: Array<System>;\r\n  error: string;\r\n  fileUpload = {status: 'error', message: 'Teste', filePath: ''};\r\n  resource = new Image();\r\n\r\n  constructor(protected imageService: ImageService, protected systemService: SystemService, protected injector: Injector) {\r\n    super(new Image, injector, imageService, Image.fromJson);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.loadSystems();\r\n  }\r\n\r\n  protected buildResourceForm() {\r\n    this.resourceForm = this.formBuilder.group({\r\n      id: [null],\r\n      name: [null, [Validators.required, Validators.minLength(2)]],\r\n      profile: [null, [Validators.required]],\r\n      description: [null],\r\n      idsystem: [null, [Validators.required]]\r\n    });\r\n  }\r\n\r\n  private loadSystems() {\r\n    this.systemService.getAll().subscribe(\r\n      systems => this.systems = systems\r\n    );\r\n  }\r\n\r\n  protected editionPageTitle(): String {\r\n    const resourceName = this.resource.name || '';\r\n    return 'Editar: ' + resourceName;\r\n  }\r\n\r\n  private onSelectedFile(files: FileList) {\r\n    if (files.length > 0) {\r\n      const file = files.item(0);\r\n      this.resourceForm.get('profile').setValue(file);\r\n    };\r\n  }\r\n\r\n  protected createResource() {\r\n    this.setResouce();\r\n    // Criando um Resource nova e atribuindo os valores de resourceForm a constante.\r\n    this.resourceService.create(this.jsonDataToResourceFn(this.resource))\r\n        .subscribe(\r\n            resource => this.actionsForSuccess(resource),\r\n            error => this.actionsForError(error)\r\n        );\r\n  }\r\n\r\n  protected updateResource() {\r\n    this.setResouce();\r\n    // Criando um Resource nova e atribuindo os valores de resourceForm a constante.\r\n    this.resourceService.update(this.jsonDataToResourceFn(this.resource))\r\n        .subscribe(\r\n            resource => this.actionsForSuccess(resource),\r\n            error => this.actionsForError(error)\r\n        );\r\n  }\r\n\r\n  private setResouce() {\r\n  /*\r\n    const formData = new FormData();\r\n    formData.append('profile', this.resourceForm.get('profile').value); \r\n    */\r\n   const profile = this.resourceForm.get('profile').value;\r\n    \r\n   this.resource.name = this.resourceForm.get('name').value;\r\n   this.resource.description = this.resourceForm.get('description').value;\r\n   this.resource.filename = profile.name;\r\n   this.resource.filepath = profile.name;\r\n   this.resource.filehash = profile.name;\r\n   this.resource.idsystem = this.resourceForm.get('idsystem').value;\r\n  }\r\n}\r\n","module.exports = \"<app-bread-crumb [itens]=\\\"[{text:'Imagens'} ]\\\"></app-bread-crumb>\\r\\n\\r\\n<app-page-header page-title=\\\"Imagens\\\" button-link=\\\"new\\\" button-class=\\\"btn-success\\\" button-text=\\\"Nova Imagem\\\"></app-page-header>\\r\\n\\r\\n<table class=\\\"table table-hover\\\">\\r\\n  <thead>\\r\\n  <tr class=\\\"bg-primary text-light\\\">\\r\\n    <th style=\\\"width: 80%\\\">Imagem</th>\\r\\n    <th class=\\\"text-center\\\" style=\\\"width: 20%\\\">Ações</th>\\r\\n  </tr>\\r\\n  </thead>\\r\\n  <tbody>\\r\\n    <tr *ngFor=\\\"let resource of resources\\\">\\r\\n      <td>\\r\\n        <strong>{{resource.name}}</strong><br>\\r\\n        <small *ngIf=\\\"resource.description\\\">{{resource.description}}</small>\\r\\n      </td>\\r\\n      <td class=\\\"text-center\\\">\\r\\n        <button [routerLink]=\\\"[resource.id, 'edit']\\\" class=\\\"btn btn-outline-info btn-sm mr-2\\\">Editar</button>\\r\\n        <button (click)=\\\"deleteResource(resource)\\\" class=\\\"btn btn-outline-danger btn-sm\\\">Excluir</button>\\r\\n      </td>\\r\\n    </tr>\\r\\n  </tbody>\\r\\n</table>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ltYWdlcy9pbWFnZS1saXN0L2ltYWdlLWxpc3QuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component } from '@angular/core';\r\nimport { BaseResourceListComponent } from '../../../shared/components/base-resource-list/base-resource-list.component';\r\nimport { Image } from '../models/image.model';\r\nimport { ImageService } from '../service/image.service';\r\n\r\n@Component({\r\n  selector: 'app-image-list',\r\n  templateUrl: './image-list.component.html',\r\n  styleUrls: ['./image-list.component.scss']\r\n})\r\nexport class ImageListComponent extends BaseResourceListComponent<Image> {\r\n\r\n  constructor(private imageService: ImageService) {\r\n    super(imageService);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ImageListComponent } from './image-list/image-list.component';\r\nimport { ImageFormComponent } from './image-form/image-form.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ImageListComponent,\r\n    data: {\r\n      title: 'Image List'\r\n    }\r\n  },\r\n  {\r\n    path: 'new',\r\n    component: ImageFormComponent,\r\n    data: {\r\n      title: 'Images Form New'\r\n    }\r\n  },\r\n  {\r\n    path: ':id/edit',\r\n    component: ImageFormComponent,\r\n    data: {\r\n      title: 'Images Form Update'\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ImagesRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\nimport { ImagesRoutingModule } from './images-routing.module';\r\nimport { ImageListComponent } from './image-list/image-list.component';\r\nimport { ImageFormComponent } from './image-form/image-form.component';\r\n\r\n@NgModule({\r\n  declarations: [ImageListComponent, ImageFormComponent],\r\n  imports: [\r\n    SharedModule,\r\n    ImagesRoutingModule\r\n  ]\r\n})\r\nexport class ImagesModule { }\r\n","import { BaseResourceModel } from '../../../shared/models/base-resource.model';\r\nimport { System } from '../../systems/models/system.model';\r\n\r\nexport class Image extends BaseResourceModel {\r\n  constructor(\r\n    public id?: number,\r\n    public name?: string,\r\n    public description?: string,\r\n    public filename?: System,\r\n    public filepath?: System,\r\n    public filehash?: System,\r\n    public idsystem?: number,\r\n    public system?: System\r\n    \r\n  ) {\r\n    super();\r\n  }\r\n\r\n  static fromJson(jsonData: any): Image {\r\n    return Object.assign(new Image(), jsonData);\r\n  }\r\n\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\n\r\nimport { BaseResourceService } from '../../../shared/services/base-resource-service';\r\nimport { Image } from '../models/image.model';\r\nimport { SystemService } from '../../systems/service/system.service';\r\n\r\nimport { Observable } from 'rxjs';\r\nimport { catchError, flatMap } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ImageService extends BaseResourceService<Image> {\r\n\r\n  constructor(protected injector: Injector, private systemService: SystemService) {\r\n    super(`${environment.apiUrl}/api/v1/image`, injector, Image.fromJson);\r\n  }\r\n\r\n  create(image: Image): Observable<Image> {\r\n    return this.setSystemAndSendToServer(image, super.create.bind(this));\r\n  }\r\n\r\n  update(image: Image): Observable<Image> {\r\n    return this.setSystemAndSendToServer(image, super.update.bind(this));\r\n  }\r\n\r\n  private setSystemAndSendToServer(image: Image, sendFn: any): Observable<Image> {\r\n    return this.systemService.getById(image.idsystem).pipe(\r\n      flatMap( system => {\r\n        image.system = system;\r\n        return sendFn(image);\r\n      }),\r\n      catchError(this.handleError)\r\n    );\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}