{"version":3,"sources":["webpack:///./src/app/pages/systems/models/system.model.ts","webpack:///./src/app/pages/systems/service/system.service.ts","webpack:///./src/app/shared/components/base-resource-form/base-resource-form.component.ts","webpack:///./src/app/shared/components/base-resource-list/base-resource-list.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAA+E;AAE/E;IAA4B,gEAAiB;IAC3C,gBACS,EAAW,EACX,IAAa,EACb,WAAoB;QAH7B,YAKE,iBAAO,SACR;QALQ,QAAE,GAAF,EAAE,CAAS;QACX,UAAI,GAAJ,IAAI,CAAS;QACb,iBAAW,GAAX,WAAW,CAAS;;IAG7B,CAAC;IAEM,eAAQ,GAAf,UAAgB,QAAa;QAC3B,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,MAAM,EAAE,EAAE,QAAQ,CAAC,CAAC;IAC/C,CAAC;IACH,aAAC;AAAD,CAAC,CAZ2B,oFAAiB,GAY5C;;;;;;;;;;;;;;;;;;;;;ACdoD;AACL;AACqC;AAKrF;IAAmC,uEAA2B;IAC5D,uBAAsB,QAAkB;QAAxC,YACE,kBAAM,gBAAgB,EAAE,QAAQ,EAAE,2DAAM,CAAC,QAAQ,CAAC,SACnD;QAFqB,cAAQ,GAAR,QAAQ,CAAU;;IAExC,CAAC;IAHU,aAAa;QAHzB,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;+EAEgC,sDAAQ;OAD7B,aAAa,CAIzB;IAAD,oBAAC;CAAA,CAJkC,0FAAmB,GAIrD;AAJyB;;;;;;;;;;;;;ACN1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwD;AACC;AACd;AACf;AAI5B;IAWI,mCACW,QAAW,EACR,QAAkB,EAClB,eAAuC,EACvC,oBAA0C;QAH7C,aAAQ,GAAR,QAAQ,CAAG;QACR,aAAQ,GAAR,QAAQ,CAAU;QAClB,oBAAe,GAAf,eAAe,CAAwB;QACvC,yBAAoB,GAApB,oBAAoB,CAAsB;QAXxD,wBAAmB,GAAa,IAAI,CAAC;QACrC,mBAAc,GAAY,KAAK,CAAC;QAY5B,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,8DAAc,CAAC,CAAC;QAC1C,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,sDAAM,CAAC,CAAC;QACnC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,0DAAW,CAAC,CAAC;IACjD,CAAC;IAED,4CAAQ,GAAR;QACI,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAED,yDAAqB,GAArB;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAED,8CAAU,GAAV;QACI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,IAAI,CAAC,aAAa,KAAK,KAAK,EAAE;YAC9B,IAAI,CAAC,cAAc,EAAE,CAAC;SACzB;aAAM;YACH,IAAI,CAAC,cAAc,EAAE,CAAC;SACzB;IACL,CAAC;IAED,oBAAoB;IACV,oDAAgB,GAA1B;QACI,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,KAAK,EAAE;YAC3C,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;aAAM;YACH,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;SAC/B;IACL,CAAC;IAIS,gDAAY,GAAtB;QAAA,iBAcC;QAbG,IAAI,IAAI,CAAC,aAAa,KAAK,MAAM,EAAE;YAC/B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CACpB,gEAAS,CAAC,gBAAM,IAAI,YAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAA/C,CAA+C,CAAC,CACvE,CAAC,SAAS,CACP,UAAC,QAAQ;gBACL,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBACzB,KAAI,CAAC,YAAY,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,6CAA6C;YACzF,CAAC,EACD,UAAC,KAAK;gBACF,KAAK,CAAC,+CAA+C,CAAC,CAAC;YAC3D,CAAC,CACJ,CAAC;SACL;IACL,CAAC;IAES,gDAAY,GAAtB;QACI,IAAI,IAAI,CAAC,aAAa,KAAK,KAAK,EAAE;YAC9B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC7C;aAAM;YACH,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC5C;IACL,CAAC;IAES,qDAAiB,GAA3B;QACI,OAAO,WAAW,CAAC;IACvB,CAAC;IAES,oDAAgB,GAA1B;QACI,OAAO,QAAQ,CAAC;IACpB,CAAC;IAES,kDAAc,GAAxB;QAAA,iBAQC;QAPG,gFAAgF;QAChF,IAAM,QAAQ,GAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QACvE,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC;aAChC,SAAS,CACN,kBAAQ,IAAI,YAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAhC,CAAgC,EAC5C,eAAK,IAAI,YAAI,CAAC,eAAe,CAAC,KAAK,CAAC,EAA3B,CAA2B,CACvC,CAAC;IACV,CAAC;IAES,kDAAc,GAAxB;QAAA,iBAQC;QAPG,gFAAgF;QAChF,IAAM,QAAQ,GAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QACvE,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC;aAChC,SAAS,CACN,kBAAQ,IAAI,YAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAhC,CAAgC,EAC5C,eAAK,IAAI,YAAI,CAAC,eAAe,CAAC,KAAK,CAAC,EAA3B,CAA2B,CACvC,CAAC;IACV,CAAC;IAES,qDAAiB,GAA3B,UAA4B,QAAW;QAAvC,iBAaC;QAZG,6CAAM,CAAC,OAAO,CAAC,qCAAqC,CAAC,CAAC;QACtD,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAM,iBAAiB,GAAW,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;QAC9E;;2CAEmC;QAChC,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,iBAAiB,CAAC,CAAC;QACvD,OAAO,CAAC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;QAE3C,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,iBAAiB,EAAE,EAAE,kBAAkB,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAC3E,cAAM,YAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iBAAiB,EAAE,QAAQ,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,EAA9D,CAA8D,CACvE,CAAC;IACN,CAAC;IAES,mDAAe,GAAzB,UAA0B,KAAK;QAC3B,6CAAM,CAAC,KAAK,CAAC,+CAA+C,CAAC,CAAC;QAC9D,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,KAAK,CAAC,MAAM,KAAK,GAAG,EAAE;YACtB,4DAA4D;YAC5D,IAAI,CAAC,mBAAmB,GAAG,CAAC,mEAAmE,CAAC,CAAC;SACpG;aAAM;YACH,IAAI,CAAC,mBAAmB,GAAG,CAAC,mEAAmE,CAAC,CAAC;SACpG;IACL,CAAC;IAEL,gCAAC;AAAD,CAAC;;;;;;;;;;;;;;ACtID;AAAA;AAAA;IAGI,mCACc,eAAuC;QAAvC,oBAAe,GAAf,eAAe,CAAwB;QAHrD,cAAS,GAAQ,EAAE,CAAC;IAIhB,CAAC;IAEL,4CAAQ,GAAR;QAAA,iBAKC;QAJG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,SAAS,CACnC,mBAAS,IAAI,YAAI,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAX,CAAW,CAAC,EAAtD,CAAsD,EACnE,eAAK,IAAI,YAAK,CAAC,0BAA0B,CAAC,EAAjC,CAAiC,CAC7C,CAAC;IACN,CAAC;IAED,kDAAc,GAAd,UAAe,QAAW;QAA1B,iBAQC;QAPG,IAAM,UAAU,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;QACvD,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAC9C,cAAM,YAAI,CAAC,SAAS,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAO,IAAI,cAAO,KAAK,QAAQ,EAApB,CAAoB,CAAC,EAAvE,CAAuE,EAC7E,cAAM,YAAK,CAAC,wBAAwB,CAAC,EAA/B,CAA+B,CACxC,CAAC;SACL;IACL,CAAC;IAEL,gCAAC;AAAD,CAAC","file":"common.js","sourcesContent":["import { BaseResourceModel } from '../../../shared/models/base-resource.model';\r\n\r\nexport class System extends BaseResourceModel {\r\n  constructor(\r\n    public id?: number,\r\n    public name?: string,\r\n    public description?: string,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  static fromJson(jsonData: any): System {\r\n    return Object.assign(new System(), jsonData);\r\n  }\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { System } from '../models/system.model';\r\nimport { BaseResourceService } from '../../../shared/services/base-resource-service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SystemService extends BaseResourceService<System> {\r\n  constructor(protected injector: Injector) {\r\n    super('/api/v1/system', injector, System.fromJson);\r\n  }\r\n}\r\n","import { AfterContentChecked, OnInit, Injector } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport toastr from 'toastr';\r\nimport { BaseResourceModel } from '../../models/base-resource.model';\r\nimport { BaseResourceService } from '../../services/base-resource-service';\r\n\r\nexport abstract class BaseResourceFormComponent<T extends BaseResourceModel> implements OnInit, AfterContentChecked {\r\n    currentAction: String;\r\n    resourceForm: FormGroup;\r\n    pageTitle: String;\r\n    serverErrorMessages: string[] = null;\r\n    submittingForm: boolean = false;\r\n\r\n    protected route: ActivatedRoute;\r\n    protected router: Router;\r\n    protected formBuilder: FormBuilder;\r\n\r\n    constructor(\r\n        public resource: T,\r\n        protected injector: Injector,\r\n        protected resourceService: BaseResourceService<T>,\r\n        protected jsonDataToResourceFn: (jsonData: any) => T\r\n    ) {\r\n        this.route = injector.get(ActivatedRoute);\r\n        this.router = injector.get(Router);\r\n        this.formBuilder = injector.get(FormBuilder);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.setCurrentAction();\r\n        this.buildResourceForm();\r\n        this.loadResource();\r\n    }\r\n\r\n    ngAfterContentChecked(): void {\r\n        this.setPageTitle();\r\n    }\r\n\r\n    submitForm() {\r\n        this.submittingForm = true;\r\n        if (this.currentAction === 'new') {\r\n            this.createResource();\r\n        } else {\r\n            this.updateResource();\r\n        }\r\n    }\r\n\r\n    // Protected Methods\r\n    protected setCurrentAction() {\r\n        if (this.route.snapshot.url[0].path === 'new') {\r\n            this.currentAction = 'new';\r\n        } else {\r\n            this.currentAction = 'edit';\r\n        }\r\n    }\r\n\r\n    protected abstract buildResourceForm(): void;\r\n\r\n    protected loadResource() {\r\n        if (this.currentAction === 'edit') {\r\n            this.route.paramMap.pipe(\r\n                switchMap(params => this.resourceService.getById(+params.get('id')))\r\n            ).subscribe(\r\n                (resource) => {\r\n                    this.resource = resource;\r\n                    this.resourceForm.patchValue(resource); // binds loader resource data to resourceForm\r\n                },\r\n                (error) => {\r\n                    alert('ocorreu um erro no servidor, tente mas tarde.');\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    protected setPageTitle() {\r\n        if (this.currentAction === 'new') {\r\n            this.pageTitle = this.creationPageTitle();\r\n        } else {\r\n            this.pageTitle = this.editionPageTitle();\r\n        }\r\n    }\r\n\r\n    protected creationPageTitle(): String {\r\n        return 'Cadastrar';\r\n    }\r\n\r\n    protected editionPageTitle(): String {\r\n        return 'Editar';\r\n    }\r\n\r\n    protected createResource() {\r\n        // Criando um Resource nova e atribuindo os valores de resourceForm a constante.\r\n        const resource: T = this.jsonDataToResourceFn(this.resourceForm.value);\r\n        this.resourceService.create(resource)\r\n            .subscribe(\r\n                resource => this.actionsForSuccess(resource),\r\n                error => this.actionsForError(error)\r\n            );\r\n    }\r\n\r\n    protected updateResource() {\r\n        // Criando um Resource nova e atribuindo os valores de resourceForm a constante.\r\n        const resource: T = this.jsonDataToResourceFn(this.resourceForm.value);\r\n        this.resourceService.update(resource)\r\n            .subscribe(\r\n                resource => this.actionsForSuccess(resource),\r\n                error => this.actionsForError(error)\r\n            );\r\n    }\r\n\r\n    protected actionsForSuccess(resource: T) {\r\n        toastr.success('Solicitação processada com sucesso!');\r\n        this.submittingForm = false;\r\n        const baseComponentPath: string = this.route.snapshot.parent.routeConfig.path;\r\n        /* this.route.snapshot.url[0].path;\r\n           skipLocationChange: não salvar historico do navegador que passou na pagina\r\n           redirect/reload componen page */\r\n           console.log('baseComponentPath: ' + baseComponentPath);\r\n           console.log('resource: ' + resource.id);\r\n\r\n        this.router.navigateByUrl(baseComponentPath, { skipLocationChange: true }).then(\r\n            () => this.router.navigate([baseComponentPath, resource.id, 'edit'])\r\n        );\r\n    }\r\n\r\n    protected actionsForError(error) {\r\n        toastr.error('Ocorreu um erro ao processada sua solicitação');\r\n        this.submittingForm = false;\r\n        if (error.status === 422) {\r\n            // this.serverErrorMessages = JSON.parse(error._body).erros;\r\n            this.serverErrorMessages = ['Falha na comunicação com o servidor, Por favor, tente mais tarde.'];\r\n        } else {\r\n            this.serverErrorMessages = ['Falha na comunicação com o servidor, Por favor, tente mais tarde.'];\r\n        }\r\n    }\r\n\r\n}\r\n","import { OnInit } from '@angular/core';\r\nimport { BaseResourceModel } from '../../models/base-resource.model';\r\nimport { BaseResourceService } from '../../services/base-resource-service';\r\n\r\nexport abstract class BaseResourceListComponent<T extends BaseResourceModel> implements OnInit {\r\n    resources: T[] = [];\r\n\r\n    constructor(\r\n        protected resourceService: BaseResourceService<T>,\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        this.resourceService.getAll().subscribe(\r\n            resources => this.resources = resources.sort((a, b) => b.id - a.id),\r\n            error => alert('Erro ao carregar a lista')\r\n        );\r\n    }\r\n\r\n    deleteResource(resource: T) {\r\n        const mustDelete = confirm('Deseja excluir esse item');\r\n        if (mustDelete) {\r\n            this.resourceService.delete(resource.id).subscribe(\r\n                () => this.resources = this.resources.filter(element => element !== resource),\r\n                () => alert('Erro ao tentar excluir')\r\n            );\r\n        }\r\n    }\r\n\r\n}\r\n"],"sourceRoot":""}